= incode-module-classification
:_imagesdir: ./
:toc:

image:https://travis-ci.org/incodehq/incode-module-classification.png?branch=master[Build Status,link=https://travis-ci.org/incodehq/incode-module-classification]

This module, intended for use with link:http://isis.apache.org[Apache Isis], provides the ability to classify any
(arbitrary) domain object as belonging to a pre-defined `Category` within a particular `Taxonomy`.  A given domain
object can only be associated with one `Category` per `Taxonomy`, but each `Category` can optionally have child (sub-)
categories.

Not every `Taxonomy` is applicable to every domain object.  Instead, the `Taxonomy` is qualified by both the domain
object's type and also its application tenancy (eg country within a multi-tenancy environment).

There are _no_ requirements for those domain objects implement any interfaces.  A subclass of the `Classification`
abstract class is required; this acts as the "glue" between the `Category` and the "classified" domain object.  In
total about
link:https://github.com/incodehq/incode-module-classification/blob/master/fixture/src/main/java/org/incode/module/classification/fixture/app/classification/demo/ClassificationForDemoObject.java[50 lines of boilerplate]
are required, details below.

This module expects that application tenancy path is hierarchical (so for example "/ITA/MIL" resides within both "/ITA"
and "/").  This allows ``Taxonomy``s to be declared as applicable at one level (eg "/ITA") and to be considered
applicable for domain objects at that level and sub-levels (eg "/ITA/MIL").  The value of the application
tenancy path of a domain object is provided through the `ApplicationTenancyService` SPI.


== Domain Model

The following http://yuml.me[] class diagram highlights the main concepts:

image::http://yuml.me/de618edc[link="http://yuml.me/de618edc"]

(The colours used in the diagram are - approximately - from link:https://en.wikipedia.org/wiki/Object_Modeling_in_Color[Object Modeling in Color]).


=== `Taxonomy` and `Category`

The `Taxonomy` entity defines a hierarchy of ``Category``s, with the `Taxonomy` itself acting as the root of each such
hierarchy.  In many cases the `Taxonomy` will be only two levels deep, in effect defining a enum, eg:

* "Italian Colours" root classification, with children:
** "Italian Colours/Red"
** "Italian Colours/White"
** "Italian Colours/Green"

However, deeper ``Taxonomy``s are possible, eg:

* "Sizes`
** "Sizes/Small"
*** "Sizes/Small/Smallest"
*** "Sizes/Small/Smaller"
*** "Sizes/Small/Small"
** "Sizes/Medium"
** "Sizes/Large"
*** "Sizes/Large/Large"
*** "Sizes/Large/Larger"
*** "Sizes/Large/Largest"

There can be many such taxonomies; any given domain object can only have one `Classification` per `Taxonomy` hierarchy
(but not more than one classification per hierarchy).  Thus, a domain object might be classified as both
"Italian Colours/Red" and "Sizes/Medium", but it isn't possible to classify as both "Italian Colours/Red" and
"Italian Colours/Green".

=== `Applicability` and `ApplicationTenancyService`

Not every domain object can be classified with respect to every ``Taxonomy``.  Instead, the available set is restricted
by the `Applicability` entity.  This identifies which ``Taxonomy``(s) can be associated with domain object types.
This is further qualified by the application tenancy of the domain object (for multi-tenanted applications).

The `ApplicationTenancyService` SPI service is used to obtain the application tenancy of each domain object.

=== `Classification`

The `Classification` is the tuple that associates a particular domain object with a particular `Category` in some
`Taxonomy`.  This must be with respect to some `Applicability`.  `Classification` itself is an `abstract` class; for
each domain object to be classified, a subclass of `Classification` is required, providing a type-safe (referential
integrity) connection between the two entities.

[NOTE]
====
The module does _not_ prevent an `Applicability` from being removed, even if there are existing ``Classification``s
that rely upon that `Applicability`.
====




== Screenshots

The module's functionality is demonstrated/tested using a demo app.  This has a small hierarchy of app tenancies,
namely "/" (global), "/ITA" (Italy)", "/FRA" (France) and two sub-tenancies of Italy and France, "/ITA/MIL" (Milan) and
"/FRA/PAR" (Paris).

There are two separate domain object types, `DemoObject` and `OtherObject`.  There are five instances of each, in the
various app tenancies.

There are also three example taxonomies: "Sizes", "Italian Colours" and also "French Colours".  These are set up so
that "Sizes" is applicable globally, while the two different "colour" taxonomies apply only to their respective
app tenancies.

To demonstrate that domain type is significant, the "Sizes" and "French Colours" taxonomies apply to `DemoObject` but
do _not_ apply to the `OtherObject`.  The "Italian Colour" taxonomy on the other hand applies to both `DemoObject` and
to `OtherObject`.


=== Taxonomies (reference data)

The screenshots below show the demo app's usage of the module.  We start by installing the demo fixture data:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/010-run-fixture-script.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/010-run-fixture-script.png"]


We can then list the taxonomies:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/030-list-taxonomies.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/030-list-taxonomies.png"]


which returns the three demo taxonomies, "Size", "Italian Colours" and "French Colours":

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/040-view-taxonomy.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/040-view-taxonomy.png"]


The "French Colours" ``Taxonomy`` contains three ``Category``s, namely "Red", "White" and "Blue":

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/050-french-colour-taxonomy.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/050-french-colour-taxonomy.png"]

while the "Italian Colours" ``Taxonomy`` contains three different ``Category``s, "Red", "White" and "Green":

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/060-italian-colour-taxonomy.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/060-italian-colour-taxonomy.png"]

Note that the "French Colours"' "Red" is different from the "Italian Colours"' "Red", also for "White".  These are two
different ``Category``s in two different ``Taxonomy``s that just happen to have the same (local) name.

Also note (as can be guessed from their names) that the "French Colours" `Taxonomy` only applies to the "/FRA" app
tenancy, while the "Italian Colours" `Taxonomy` applies only to the "/ITA" app tenancy.  The former also only to the
`DemoObject` domain type, while the latter apples to both `DemoObject` and also `OtherObject` domain types.


The final `Taxonomy` is "Size":

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/070-size-taxonomy.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/070-size-taxonomy.png"]

In contrast to the two "colour" taxonomies, the "Size" taxonomy is defined globally (for the "/" app tenancy).  However,
it only applies to the ``DemoObject`` domain type, not to the ``OtherObject`` domain type.

The "Size" taxonomy is also more complex than the other two taxonomies, in that contains categories and sub-categories:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/080-size-taxonomy-hierarchy.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/080-size-taxonomy-hierarchy.png"]

The table below summarizes the various taxonomies and their applicability:

.Taxonomy applicability
[cols="1a,1a,1a,1a,1a", options="header"]
|===

| Domain type 
| App tenancy
| "Italian Colours" +
taxonomy
| "French Colours" +
taxonomy
| "Size" +
taxonomy

.5+| `DemoObject`
|`/`
|No
|No
|Yes

|`/ITA`
|Yes
|No
|Yes

|`/FRA`
|No
|Yes
|Yes

|`/ITA/MIL`
|Yes
|No
|Yes

|`/FRA/PAR`
|No
|Yes
|Yes

.5+| `OtherObject`
|`/`
|No
|No
|No

|`/ITA`
|Yes
|No
|No

|`/FRA`
|No
|No
|No

|`/ITA/MIL`
|Yes
|No
|No

|`/FRA/PAR`
|No
|No
|No

|===


=== Domain Object Data

The example app creates 5 instances of `DemoObject`, each in a different app tenancy:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/090-view-demo-foo.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/090-view-demo-foo.png"]

The "foo" `DemoObject` is in the "/ITA" app tenancy, which means that the "Italian Colours" and "Sizes" taxonomies both
apply.  The example seed data adds ``Classification``s for this object in each of these taxonomies.  As the screenshot
shows, no further ``Classification``s can be added:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/100-demo-foo-cannot-classify.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/100-demo-foo-cannot-classify.png"]

The "bar" `DemoObject` is in the "/FRA" app tenancy, which means that the "French Colours" and "Sizes" taxonomies both
apply.  The example seed data adds a `Classification` for the "Sizes" taxonomy, which means that the object can still
be classified (in the "French Colours" taxonomy):

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/110-demo-bar-can-classify.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/110-demo-bar-can-classify.png"]


Since there is only one applicable taxonomy ("French Colours"), this is automatically defaulted.  The end-user can
then select the particular `Category` within that `Taxonomy`:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/120-demo-bar-classify-french-colours.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/120-demo-bar-classify-french-colours.png"]


The "baz" `DemoObject` on the other hand starts off with no ``Classification``s. Because this has global app tenancy,
only the "Sizes" `Taxonomy` applies:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/130-demo-baz-global-classify-only-size-available.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/130-demo-baz-global-classify-only-size-available.png"]


We can also view the `OtherObject` instances:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/140-view-others.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/140-view-others.png"]


Like `DemoObject`, there are five instances of `OtherObject`, again each with a different app tenancy:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/150-view-other-foo.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/150-view-other-foo.png"]

The difference between `OtherObject` and `DemoObject` is that neither the "Sizes" nor "French Colours" taxonomies are
applicable to ``OtherObject``.  Thus, with the "foo" ``OtherObject`` the only available taxonomy to classify is "Italian Colours":

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/160-other-cannot-classify-size.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/160-other-cannot-classify-size.png"]

Once a `Classification` has been made, it can be altered to any other `Category` within the same `Taxonomy`:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/170-view-other-foo-change-classification-category.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/170-view-other-foo-change-classification-category.png"]

Here the `Classification` is being changed:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/180-change-classification-category-prompt.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/180-change-classification-category-prompt.png"]


Which we can see _has_ then been changed:

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/190-change-classification-category.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/190-change-classification-category.png"]


It is also possible to change each ``Category``'s name, reference and (sorting) ordinal.  If the name or ordinal are
changed then the fully qualified name/ordinal are automatically updated for both the `Category` and any of its children.

image::https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/200-change-name-ref-sorting-ordinal.png[link="https://raw.githubusercontent.com/incodehq/incode-module-classification/master/images/200-change-name-ref-sorting-ordinal.png"]




== How to run the Demo App

The prerequisite software is:

* Java JDK 8
* http://maven.apache.org[maven 3] (3.2.x or later is recommended).

To build the demo app:

[source]
----
git clone https://github.com/incodehq/isis-module-classification.git
mvn clean install
----

To run the demo app:

[source]
----
cd webapp
mvn jetty:run
----

Then log on using user: `sven`, password: `pass`




== How to configure/use

You can either use this module "out-of-the-box", or you can fork this repo and extend to your own requirements. 

=== "Out-of-the-box"

To use "out-of-the-box":

* update your classpath by adding this dependency in your dom project's `pom.xml`: +
+
[source,xml]
----
<dependency>
    <groupId>org.incode.module.classification</groupId>
    <artifactId>incode-module-classification-dom</artifactId>
    <version>1.14.0</version>
</dependency>
----

* in the `AppManifest`, update its `getModules()` method: +
+
[source,java]
----
@Override
public List<Class<?>> getModules() {
    return Arrays.asList(
            ...
            org.incode.module.classification.dom.ClassificationModule.class,
    );
}
----




Notes:

* Check for later releases by searching http://search.maven.org/#search|ga|1|incode-module-classification-dom[Maven Central Repo].


==== "Out-of-the-box" (-SNAPSHOT)

If you want to use the current `-SNAPSHOT`, then the steps are the same as above, except:

* when updating the classpath, specify the appropriate -SNAPSHOT version:

[source,xml]
----
<version>1.14.0-SNAPSHOT</version>
----

* add the repository definition to pick up the most recent snapshot (we use the Cloudbees continuous integration service).  We suggest defining the repository in a `<profile>`:

[source,xml]
----
<profile>
    <id>cloudbees-snapshots</id>
    <activation>
        <activeByDefault>true</activeByDefault>
    </activation>
    <repositories>
        <repository>
            <id>snapshots-repo<;/id>
            <url>http://repository-estatio.forge.cloudbees.com/snapshot/</url>
            <releases>
                <enabled>false>/enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
</profile>
----


=== For each domain object...

For each domain object that you want to classify (that is, add ``Classification``s to), you need to:

* implement a subclass of `Classification` for the domain object's type. +
+
This link acts as a type-safe tuple linking the domain object to the `Category`.

* implement the `ApplicationTenancyService` SPI interface: +
+
[source,java]
----
public interface ApplicationTenancyService {
    String atPathFor(final Object domainObjectToClassify);
}
----
+
This allows the module to find which taxonomies are applicable to the domain object.

* implement the `ClassificationRepository.SubtypeProvider` SPI interface: +
+
[source,java]
----
public interface SubtypeProvider {
    Class<? extends Classification> subtypeFor(Class<?> domainObject);
}
----
+
This tells the module which subclass of `Classification` to use to attach to the "classified" domain object.  The
`SubtypeProviderAbstract` adapter can be used to remove some boilerplate.

* subclass `T_classify`, `T_unclassify` and `T_classifications` (abstract) mixin classes for the domain object. +
+
These contribute the "classifications" collection and actions to add and remove ``Classification``s.

Typically the SPI implementations and the mixin classes are nested static classes of the `Classification` subtype.



For example, in the demo app the `DemoObject` can be classified by virtue of the
link:https://github.com/incodehq/incode-module-classification/blob/master/fixture/src/main/java/org/incode/module/classification/fixture/app/classification/demo/ClassificationForDemoObject.java[`ClassificationForDemoObject`] subclass:

[source,java]
----
@javax.jdo.annotations.PersistenceCapable(identityType= IdentityType.DATASTORE, schema="incodeClassificationDemo")
@javax.jdo.annotations.Inheritance(strategy = InheritanceStrategy.NEW_TABLE)
@DomainObject
public class ClassificationForDemoObject extends Classification {                   // <1>

    private DemoObject demoObject;
    @Column(allowsNull = "false", name = "demoObjectId")
    @Property(editing = Editing.DISABLED)
    public DemoObject getDemoObject() {                                             // <2>
        return demoObject;
    }
    public void setDemoObject(final DemoObject demoObject) {
        this.demoObject = demoObject;
    }

    public Object getClassified() {                                                 // <3>
        return getDemoObject();
    }
    protected void setClassified(final Object classified) {
        setDemoObject((DemoObject) classified);
    }

    @DomainService(nature = NatureOfService.DOMAIN)
    public static class ApplicationTenancyServiceForDemoObject
                    implements ApplicationTenancyService {                          // <4>
        @Override
        public String atPathFor(final Object domainObjectToClassify) {
            if(domainObjectToClassify instanceof DemoObject) {
                return ((DemoObject) domainObjectToClassify).getAtPath();
            }
            return null;
        }
    }

    @DomainService(nature = NatureOfService.DOMAIN)
    public static class SubtypeProvider
            extends ClassificationRepository.SubtypeProviderAbstract {              // <5>
        public SubtypeProvider() {
            super(DemoObject.class, ClassificationForDemoObject.class);
        }
    }

    @Mixin
    public static class _classifications extends T_classifications<DemoObject> {    // <6>
        public _classifications(final DemoObject classified) {
            super(classified);
        }
    }
    @Mixin
    public static class _classify extends T_classify<DemoObject> {
        public _classify(final DemoObject classified) {
            super(classified);
        }
    }
    @Mixin
    public static class _unclassify extends T_unclassify<DemoObject> {
        public _unclassify(final DemoObject classified) {
            super(classified);
        }
    }
}
----
<1> extend from `Classification`
<2> the type-safe reference property to the "classified" domain object (in this case `DemoObject`).  In the RDBMS
this will correspond to a regular foreign key with referential integrity constraints correctly applied.
<3> implement the hook `setClassified(...)` method to allow the type-safe reference property to the "classified" (in
this case `DemoObject`) to be set.  Also implemented `getClassified()` similarly
<4> implementation of the `ApplicationTenancyService` for the domain object, telling the module the app tenancy of
the domain object to be classified.  If there is no implementation of this service (but the mixins have been defined)
then the contributed collections and actions will still be visible but the collection will remain empty and the
actions disabled.
<5> implementation of the `SubtypeProvider` SPI domain service, telling the module which subclass of `Classification`
to instantiate to attach to the "classified" domain object
<6> mixins for the collections and actions contributed to the "classified" domain object



== UI Concerns

The attached `Classification` objects are shown in two contexts: as a table of `Classification` objects for the
"classified" domain object, and then as the actual subtype when the classification object itself is shown (eg
`ClassificationForDemoObject` in the demo app).

In the former case (as a table) the `Classification` will be rendered according to the `Classification.layout.xml`
provided by the module.  In the latter (as an object) the classification will be rendered according to the layout
provided by the consuming app, offering full control of the layout.  The layout provided in the demo app
(ie link:https://github.com/incodehq/incode-module-classification/blob/master/fixture/src/main/java/org/incode/module/classification/fixture/app/classification/demo/ClassificationForDemoObject.layout.xml[`ClassificationForDemoObject.layout.xml`])
is a good starting point.

The module also allows the title, icon and CSS for `Classification`, `Category` and `Applicability` objects to be
customised.  In all three cases this done using subscribers.  By default the values of the title/icon/CSS class is
obtained using default subscribers, eg `Classification.TitleSubscriber`, `Classification.IconSubscriber` and
`Classification.CssClassSubscriber`.  The consuming module can override these values simply by providing alternative
implementations.



== Other Services

The module provides the following domain services for querying aliases:

* `CategoryRepository` +
+
To search for existing ``Category``s, and to create top-level ``Taxonomy``s.  Children are created from
`Category` itself.

* `ClassificationRepository` +
+
To search for ``Classification``s, ie the tuple that links an `Category` with an arbitrary "classified" domain object.



== Known issues

None at this time.


== Change Log

* `1.14.0` - released against Isis 1.14.0
* `1.13.1` - released against Isis 1.13.1, closes link:https://github.com/incodehq/incode-module-classification/issues/1[#1].
* `1.13.0` - released against Isis 1.13.0



== Forking the repo

If instead you want to extend this module's functionality, then we recommend that you fork this repo.  The repo is
structured as follows:

* `pom.xml` - parent pom
* `app` - the demo webapp's `AppManifest`
* `dom` - the module implementation, depends on Isis applib
* `fixture` - fixtures, holding a sample domain objects and fixture scripts; depends on `dom`
* `integtests` - integration tests for the module; depends on `fixture`
* `webapp` - demo webapp (see above screenshots); depends on `dom` and `fixture`

Only the `dom` project is released to Maven Central Repo.  The versions of the other modules are purposely left at
`0.0.1-SNAPSHOT` because they are not intended to be released.

Note that the module uses link:https://projectlombok.org/[Project Lombok].  To compile the code within your IDE you will
therefore require the appropriate Lombok plugin.  See the link:https://projectlombok.org/download.html[Lombok download page] for more information.


== Legal Stuff

=== License

[source]
----
Copyright 2016 Dan Haywood

Licensed under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
----

=== Dependencies

Depends upon:

* http://github.com/isisaddons/isis-module-poly[Isis addons' poly] module

released under Apache v2 license.


=== Icons

The icons are provided by https://icons8.com/[Icons8].


==  Maven deploy notes

Only the `dom` module is deployed, and is done so using Sonatype's OSS support (see
http://central.sonatype.org/pages/apache-maven.html[user guide]).

=== Release to Sonatype's Snapshot Repo

To deploy a snapshot, use:

[source]
----
pushd dom
mvn clean deploy
popd
----

The artifacts should be available in Sonatype's
https://oss.sonatype.org/content/repositories/snapshots[Snapshot Repo].



=== Release an Interim Build

If you have commit access to this project (or a fork of your own) then you can create interim releases using the `interim-release.sh` script.

The idea is that this will - in a new branch - update the `dom/pom.xml` with a timestamped version (eg `1.14.0.20170227-0738`).
It then pushes the branch (and a tag) to the specified remote.

A CI server such as Jenkins can monitor the branches matching the wildcard `origin/interim/*` and create a build.
These artifacts can then be published to a snapshot repository.

For example:

[source]
----
sh interim-release.sh 1.14.0 origin
----

where

* `1.14.0` is the base release
* `origin` is the name of the remote to which you have permissions to write to.




=== Release to Maven Central

The `release.sh` script automates the release process. It performs the following:

* performs a sanity check (`mvn clean install -o`) that everything builds ok
* bumps the `pom.xml` to a specified release version, and tag
* performs a double check (`mvn clean install -o`) that everything still builds ok
* releases the code using `mvn clean deploy`
* bumps the `pom.xml` to a specified release version

For example:

[source]
----
sh release.sh 1.14.0 \
              1.15.0-SNAPSHOT \
              dan@haywood-associates.co.uk \
              "this is not really my passphrase"
----

where
* `$1` is the release version
* `$2` is the snapshot version
* `$3` is the email of the secret key (`~/.gnupg/secring.gpg`) to use for signing
* `$4` is the corresponding passphrase for that secret key.

Other ways of specifying the key and passphrase are available, see the `pgp-maven-plugin`'s
http://kohsuke.org/pgp-maven-plugin/secretkey.html[documentation]).

If the script completes successfully, then push changes:

[source]
----
git push origin master && git push origin 1.14.0
----

If the script fails to complete, then identify the cause, perform a `git reset --hard` to start over and fix the issue
before trying again.  Note that in the `dom`'s `pom.xml` the `nexus-staging-maven-plugin` has the 
`autoReleaseAfterClose` setting set to `true` (to automatically stage, close and the release the repo).  You may want
to set this to `false` if debugging an issue.

According to Sonatype's guide, it takes about 10 minutes to sync, but up to 2 hours to update http://search.maven.org[search].

